setlocal

set "source_folder=E:\data\development\nodejs\node_modules"

set "exclude_list=%source_folder%\exclude_list.txt"

rem Compress the folder using 7zip, excluding the files in the exclude list
"C:\Program Files\7-Zip\7z.exe" a "%temp%\exclude.7z" "%source_folder%\*" -x@"%exclude_list%"

move "%temp%\exclude.7z" "X:\development\exclude.7z"

pause
endlocal

:: it did not removed the .git this time where it removed it when it was one folder