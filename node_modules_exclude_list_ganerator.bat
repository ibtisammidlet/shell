setlocal
set "source_folder=E:\data\development\nodejs\node_modules"

set "exclude_folder1=.git"
set "exclude_list=%source_folder%\exclude_list.txt"
dir /b /s /a:d "%source_folder%\%exclude_folder1%" > "%exclude_list%"

endlocal
:: https://you.com/search?q=the+.git+folder+might+not+present+in+first+level+if+subdirectories+which+make+the+task+too+compelex+%2C+the+folder+i+want+to+compress+containe+116000+file%2C+so+even+making+foreach+function+that+check+for+exclution+will+be+to+heavey+on+cpu&cid=c1_2cc5377a-3a0f-449f-bd50-bdc09c6aa959&tbm=youchat